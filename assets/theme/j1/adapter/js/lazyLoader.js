/*
 # -----------------------------------------------------------------------------
 # ~/assets/theme/j1/adapter/js/lazyLoader.js
 # J1 Adapter for the J1 lazyLoader module
 #
 # Product/Info:
 # https://jekyll.one
 #
 # Copyright (C) 2023-2025 Juergen Adams
 #
 # J1 Template is licensed under the MIT License.
 # For details, see: https://github.com/jekyll-one-org/j1-template/blob/main/LICENSE
 # -----------------------------------------------------------------------------
 #  Adapter generated: 2025-07-29 04:17:59 +0200
 # -----------------------------------------------------------------------------
*/
j1.adapter.lazyLoader=((e,t)=>{"development"===e.env||e.env;var r,n,o,s,a,i,l,c,d=e.getCookieNames();e.readCookie(d.user_state);return{init:t=>{$.extend({module_name:'j1.adapter.lazyLoader',generated:'2025-07-29 04:17:59 +0200'},t);r=$.extend({},{enabled:!1}),n=$.extend({},{enabled:!0,loaders:[{loader:null,enabled:!0,type:"image",description:"Foreground Images (img)",selector:"img.lazy",rootMargin:"150px"},{loader:null,enabled:!0,type:"xhr",description:"Teaser Banner",content:"banner_home_teaser_content",content_file:"/assets/data/banner.html",selector:"banner_home_teaser",rootMargin:"150px"},{loader:null,enabled:!0,type:"xhr",description:"Parallax Banner",content:"banner_home_parallax_content",content_file:"/assets/data/banner.html",selector:"banner_home_parallax",rootMargin:"250px"},{loader:null,enabled:!0,type:"css",description:"MDI Icons (light)",src:"/assets/theme/j1/core/css/icon-fonts/mdil.min.css",selector:".mdil",rootMargin:"150px"},{loader:null,enabled:!0,type:"css",description:"MDI Icon CSS (regular)",src:"/assets/theme/j1/core/css/icon-fonts/mdi.min.css",selector:".mdi",rootMargin:"150px"},{loader:null,enabled:!0,type:"css",description:"CountryFlag Icon CSS",src:"/assets/theme/j1/core/country-flags/css/theme/uno.min.css",selector:".flag-icon",rootMargin:"150px"}]}),o=$.extend(!0,{},r,n),s=e.adapter.lazyLoader,a=log4javascript.getLogger('j1.adapter.lazyLoader');var i=setInterval(()=>{'finished'===e.getState()&&(l=Date.now(),s.setState('started'),a.debug('set module state to: '+s.getState()),a.info('initializing module: started'),s.registerLoaders(o),s.setState('finished'),a.debug('state: '+s.getState()),a.info('initializing module: finished'),c=Date.now(),a.info('module initializing time: '+(c-l)+'ms'),clearInterval(i))},10)},registerLoaders:()=>{s.cssLoader().observe({src:'/assets/theme/j1/core/css/icon-fonts/mdil.min.css',selector:'.mdil',rootMargin:'150px'}),a.info('register lazy loading for: MDI Icons (light)'),s.cssLoader().observe({src:'/assets/theme/j1/core/css/icon-fonts/mdi.min.css',selector:'.mdi',rootMargin:'150px'}),a.info('register lazy loading for: MDI Icon CSS (regular)'),s.cssLoader().observe({src:'/assets/theme/j1/core/country-flags/css/theme/uno.min.css',selector:'.flag-icon',rootMargin:'150px'}),a.info('register lazy loading for: CountryFlag Icon CSS')},cssLoader:()=>{let e={};const r=r=>{e=r,('IntersectionObserver'in t?s:n)()},n=()=>{r=!1},o=()=>{let t=document.createElement('link'),r='lazy'+e.selector;t.id=r.replace('.','_'),t.rel='stylesheet',t.type='text/css',t.href=e.src,document.head.appendChild(t),a.info('lazy load of type '+t.rel+': '+t.href)},s=()=>{let t=document.querySelectorAll(e.selector),r=new IntersectionObserver((t,r)=>{t[0].intersectionRatio>0&&(o(),sessionStorage[e.selector]=!0,r.disconnect())},{rootMargin:e.rootMargin});t.forEach(e=>{r.observe(e)})};return{observe:r}},messageHandler:(e,t)=>{var r=JSON.stringify(t,undefined,2);return i='received message from '+e+': '+r,a.debug(i),'command'===t.type&&'module_initialized'===t.action&&a.info(t.text),!0},setState:e=>{s.state=e},getState:()=>s.state}})(j1,window);