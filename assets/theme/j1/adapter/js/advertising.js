/*
 # -----------------------------------------------------------------------------
 # ~/assets/theme/j1/adapter/js/advertising.js
 # J1 Adapter for advertising
 #
 # Product/Info:
 # https://jekyll.one
 #
 # Copyright (C) 2023-2025 Juergen Adams
 #
 # J1 Template is licensed under the MIT License.
 # For details, see: https://github.com/jekyll-one-org/j1-template/blob/main/LICENSE
 # -----------------------------------------------------------------------------
 #  Adapter generated: 2025-07-14 03:21:09 +0200
 # -----------------------------------------------------------------------------
*/
"use strict";j1.adapter.advertising=((e,t)=>{const a="development"===e.env||"dev"===e.env;var o,d,n,l,s,i,r,c,u,g,m,p,y,b,f,v='production',w=(v.includes('prod'),!!v.includes('dev'));(new Date).toISOString(),document.createElement('script'),document.createElement('div'),document.createElement('ins'),document.createElement('script');return{init:a=>{$.extend({module_name:'j1.adapter.advertising',generated:'2025-07-14 03:21:09 +0200'},a);b=log4javascript.getLogger('j1.adapter.advertising'),y=e.adapter.advertising,u=e.getCookieNames(),g=e.readCookie(u.user_consent),c=new liteURL(t.location.href),c.hostname,s=null!=a?$.extend({},a):{},d=$.extend({},{enabled:!1,provider:"google",google:{placement:"manual",autoPlaceAds:!1,autoHideOnUnfilled:!1,addBorderOnUnfilled:!0,checkTrackingProtection:!1,showErrorPageOnBlocked:!1}}),n=$.extend({},{enabled:!1,google:{publisherID:"<your-publisher-id>",ads:[{ad:null,enabled:!0,id:"ad_<your-slot-id>",layout:"home",content_page:"home",publisherID:"<your-publisher-id>",test:"on",styles:"display:block;",slot:"<your-slot-id>",ad_layout:"display",ad_format:"auto",ad_responsive:!0},{ad:null,enabled:!0,id:"ad_<your-slot-id>",layout:"page",content_page:"preview_google_adsense",publisherID:"<your-publisher-id>",test:"on",styles:"display:block;",slot:"<your-slot-id>",ad_layout:"display",ad_format:"auto",ad_responsive:!0}]}}),l=$.extend(!0,{},d,n,s),o=l.layout,m=l.google.publisherID,p=!!m.includes('pub-'),i=l.google.autoHideOnUnfilled,r=l.google.addBorderOnUnfilled,l.google.checkTrackingProtection,l.google.showErrorPageOnBlocked;var f=setInterval(()=>{var t='block'===$('#content').css("display");if('finished'===e.getState()&&t){Date.now();var a=document.getElementsByClassName('adsbygoogle').length;(b=log4javascript.getLogger('j1.adapter.advertising')).debug('found ads in page: #'+a),b.debug('no ads initialized, advertising disabled'),clearInterval(f)}},10)},ad_initializer:()=>{var d=setInterval(()=>{var n='block'===$('#content').css("display"),s='finished'===e.getState(),i=document.getElementsByClassName('adsbygoogle').length>0,r=0;if(s&&n&&i){if(!p)return clearInterval(d),!1;if(l.google.ads.forEach(e=>{if(g.personalization){var t=document.getElementById(e.id);if(null!==t&&e.enabled&&e.layout===o){var d=document.createElement('ins');t.appendChild(d);var n='ins_'+e.id;d.setAttribute('id',n),d.className="adsbygoogle",document.getElementById(n).setAttribute('style',e.styles),document.getElementById(n).setAttribute('data-ad-test',e.test),document.getElementById(n).setAttribute('data-ad-client',e.publisherID),document.getElementById(n).setAttribute('data-ad-slot',e.slot),document.getElementById(n).setAttribute('data-ad-format',e.ad_format),'display'===e.ad_layout&&document.getElementById(n).setAttribute('data-full-width-responsive',e.ad_responsive),'multiplex'===e.ad_layout&&(document.getElementById(n).setAttribute('data-matched-content-ui-typ',e.ui_type),document.getElementById(n).setAttribute('data-matched-content-columns-num',e.ui_columns),document.getElementById(n).setAttribute('data-matched-content-rows-num',e.ui_rows)),r++}else e.layout===o&&a&&b.warn('ad disabled on id '+e.id+' for slot: '+e.slot)}else a&&b.warn('skipped add settings on all ad containers')}),r>0){b.info('ads enabled found in page (total): '+r);var c=document.getElementsByClassName('adsbygoogle'),u=document.getElementsByClassName('adsbygoogle').length;u--,[].forEach.call(c,()=>{u>0&&(adsbygoogle=t.adsbygoogle||[]).push({}),u--})}else a&&b.warn('no ads found in page for layout: '+o);clearInterval(d)}},10)},ad_monitor:()=>{$('.adsbygoogle').attrchange({trackValues:!0,callback:e=>{var t=e.target.dataset,o=!e.target.className.includes('adsbygoogle-noablate'),d=!!'production'.includes('prod');if($('.adsbygoogle').is(":visible")&&o&&e.newValue!==e.oldValue)if('unfilled'===e.newValue)d?console.debug('detected ad blocks in state: unfilled'):a&&b.warn('detected ad on slot '+t.adSlot+' in state: '+e.newValue),r&&$('.adsbygoogle').addClass('border--dotted'),i&&(w&&b.info(' hide ad on slot: '+t.adSlot),$('.adsbygoogle').hide());else if('filled'===e.newValue)b.info('detected ad on slot '+t.adSlot+' in state: '+e.newValue);else{var n=!!e.newValue.includes('display'),l=!!e.newValue.includes('dotted');n?d?console.info('detected ad blocks in state: filled'):b.info('detected ad block on slot '+t.adSlot+' in state: filled'):l?d?console.info('detected ad blocks in state: unfilled'):b.info('detected ad block on slot '+t.adSlot+' in state: unfilled'):d?console.warn('unknown ad state detected: '+e.newValue):a&&b.warn('unknown ad state detected on slot '+t.adSlot+' : '+e.newValue)}}})},check_tracking_protection:()=>{function e(){e.promise||(e.promise=new Promise((e,t)=>{var a=Date.now(),o=new Image;o.onload=e,o.onerror=(()=>{Date.now()-a<50?t(new Error("Rejected.")):e(new Error("Takes too long."))}),o.src='//www.facebook.com/tr/'}).then(()=>{!1})["catch"](e=>{!0,t.debug('detection details: '+e)}))}var t=log4javascript.getLogger('j1.adapter.advertising.monitor.tracking');f='check for trackingprotection',t.info(f),e()},messageHandler:(e,t)=>{var a=JSON.stringify(t,undefined,2);return f='received message from '+e+': '+a,b.debug(f),'command'===t.type&&'module_initialized'===t.action&&w&&b.info(t.text),!0},setState:e=>{y.state=e},getState:()=>y.state}})(j1,window);