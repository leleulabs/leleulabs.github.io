/*
 # -----------------------------------------------------------------------------
 #  ~/assets/theme/j1/adapter/js/iframer.js
 #  J1 Adapter for J1 Module iFramer
 #
 #  Product/Info:
 #  https://jekyll.one
 #  http://davidjbradshaw.github.io/iframe-resizer/
 #
 #  Copyright (C) 2023-2025 Juergen Adams
 #  Copyright (C) 2013-2023  David J. Bradshaw
 #
 #  J1 Template is licensed under the MIT License.
 #  For details, see: https://github.com/jekyll-one-org/j1-template/blob/main/LICENSE
 #  iFrameResizer is licensed under under the MIT License.
 #  For details, see http://davidjbradshaw.github.io/iframe-resizer/
 #
 # -----------------------------------------------------------------------------
 #  Adapter generated: 2025-07-05 06:15:45 +0200
 # -----------------------------------------------------------------------------
 */
"use strict";j1.adapter.iframer=((e,t)=>{"development"===e.env||e.env;var i,n,a,d,o,r,s,l,c,m;return{init:l=>{d=new URL(t.location.href),o=d.origin;$.extend({module_name:'j1.adapter.iframer',generated:'2025-07-05 06:15:45 +0200'},l);r=e.adapter.iframer,s=log4javascript.getLogger('j1.adapter.iframer'),i=$.extend({},{enabled:!1,xhr_data_path:"/assets/data/iframes",delay_iframer:1e3,inject_contentWindowScript:!1,delay_inject_contentWindowScript:500,attributes:{allow:!1,allowfullscreen:!0,height:!1,loading:"eager",name:!1,referrerpolicy:"no-referrer",src:"",scrolling:!1,title:!1,width:!1},options:{autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:"Infinity",maxWidth:"Infinity",minHeight:0,minWidth:0,mouseEvents:!0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:"function () { return true }",onClosed:"function () {}",onInit:"function () {}",onMessage:"function () { warn('onMessage function not defined') }",onMouseEnter:"function () {}",onMouseLeave:"function () {}",onResized:"function () {}",onScroll:"function () { return true }"}}),n=$.extend({},{enabled:!1,iframes:[{iframe:null,enabled:!0,id:"magic_iframe",inject_contentWindowScript:!0,attributes:{loading:"lazy",name:"iframe document",src:"/pages/public/tools/previewer/iframer_documents/iframe.content.html",width:"100%",scrolling:!1},options:{log:!0,inPageLinks:!0,onResized:"function(messageData) {\n  // Callback when page is resized\n  $('p#resize_stats').html (\n    '<b>iFrame ID:</b> ' +\n      messageData.iframe.id +\n      '&nbsp;&nbsp; <b>Height:</b> ' +\n      messageData.height +\n      '&nbsp;&nbsp; <b>Width:</b> ' +\n      messageData.width +\n      '&nbsp;&nbsp; <b>Event type:</b> ' +\n      messageData.type\n  )\n}\n"}},{iframe:null,enabled:!0,id:"documind",inject_contentWindowScript:!0,attributes:{loading:"lazy",src:"/pages/public/tools/previewer/iframer_documents/iframe.docsearch.info.html",title:"",allowtransparency:!0,style:"background: #FAFAFA;",height:600,width:"100%"},options:{checkOrigin:!1}}]}),a=$.extend(!0,{},i,n),console.debug('loading HTML portion for all iFrames configured'),r.loadIframeHTML(a,a.iframes),r.setState('started'),s.debug('state: '+r.getState()),s.info('module is being initialized');var u=setInterval(()=>{var t='block'===$('#content').css("display");'finished'===e.getState()&&t&&(r.setState('started'),s.debug('state: '+r.getState()),s.info('module is being initialized'),s.info('initialize iFramer'),r.initialize(a),r.setState('finished'),s.debug('state: '+r.getState()),s.info('initializing module finished'),m=Date.now(),s.info('module initializing time: '+(m-c)+'ms'),clearInterval(u))},10)},initialize:t=>{var i=t,n={};r.setState('running'),s.debug('state: '+r.getState()),s.info("found iframe on id: magic_iframe"),n['dependencies_met_html_loaded_magic_iframe']='',n.dependencies_met_html_loaded_magic_iframe=setInterval(()=>{if('success'===e.xhrDOMState['#magic_iframe_parent']){$('#magic_iframe');s.info("dyn_loader, initialize iframe on id: magic_iframe"),setTimeout(()=>{var e,t,i,n;t='magic_iframe',(n=(i=(e=document.getElementById(t)).contentDocument||e.contentWindow.document).createElement('script')).id='contentWindowScript',n.async=!0,n.src=o+'/assets/theme/j1/modules/iframeResizer/js/client/iframeResizer.contentWindow.min.js',i.head.appendChild(n)},i.delay_inject_contentWindowScript),setTimeout(()=>{iFrameResize({log:!0,inPageLinks:!0,onResized:function(e){$('p#resize_stats').html('<b>iFrame ID:</b> '+e.iframe.id+'&nbsp;&nbsp; <b>Height:</b> '+e.height+'&nbsp;&nbsp; <b>Width:</b> '+e.width+'&nbsp;&nbsp; <b>Event type:</b> '+e.type)}},'#magic_iframe')},1e3),clearInterval(n.dependencies_met_html_loaded_magic_iframe)}},10),s.info("found iframe on id: documind"),n['dependencies_met_html_loaded_documind']='',n.dependencies_met_html_loaded_documind=setInterval(()=>{if('success'===e.xhrDOMState['#documind_parent']){$('#documind');s.info("dyn_loader, initialize iframe on id: documind"),setTimeout(()=>{var e,t,i,n;t='documind',(n=(i=(e=document.getElementById(t)).contentDocument||e.contentWindow.document).createElement('script')).id='contentWindowScript',n.async=!0,n.src=o+'/assets/theme/j1/modules/iframeResizer/js/client/iframeResizer.contentWindow.min.js',i.head.appendChild(n)},i.delay_inject_contentWindowScript),setTimeout(()=>{iFrameResize({checkOrigin:!1},'#documind')},1e3),clearInterval(n.dependencies_met_html_loaded_documind)}},10),r.setState('finished'),s.debug('state: '+r.getState()),s.info('module initialized successfully')},loadIframeHTML:(t,i)=>{var n,a=Object.keys(i).length,d=a,o=t.xhr_data_path+'/index.html';console.debug('number of iframes found: '+d),r.setState('load_data'),Object.keys(i).forEach(t=>{i[t].enabled?(n=i[t].id+'_parent',console.debug('load HTML portion on iframe id: '+i[t].id),e.loadHTML({xhr_container_id:n,xhr_data_path:o,xhr_data_element:i[t].id})):(console.debug('iframe found disabled on id: '+i[t].id),d--)}),console.debug('iframes loaded in page enabled|all: '+d+'|'+a),r.setState('data_loaded')},setXhrState:(t,i)=>{e.adapter.navigator.xhrData[t]=i},getXhrState:t=>e.adapter.navigator.xhrData[t],messageHandler:(e,t)=>{var i=JSON.stringify(t,undefined,2);return l='received message from '+e+': '+i,s.debug(l),'command'===t.type&&'module_initialized'===t.action&&s.info(t.text),!0},setState:e=>{r.state=e},getState:()=>r.state}})(j1,window);